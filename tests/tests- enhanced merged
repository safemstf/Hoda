<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hoda Voice - Form Filling Tests</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        font-family: system-ui,-apple-system,sans-serif;
        background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #fff;
    }

    .container { max-width: 1200px; margin: 0 auto; }

    .header { text-align: center; margin-bottom: 30px; }
    .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
    .header p { opacity: 0.9; font-size: 1.1rem; }

    /* Forms Grid */
    .forms-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }

    .form-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        color: #333;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .form-card h2 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 1.5rem;
        border-bottom: 2px solid #667eea;
        padding-bottom: 8px;
    }

    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 6px; font-weight: 600; }
    
    input, select, textarea {
        width: 100%;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
    }

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #667eea;
    }

    .checkbox-group { display:flex; align-items:center; gap:8px; }
    .form-actions { margin-top: 20px; display:flex; gap:10px; }

    button[type=submit], button[type=reset] {
        padding: 12px 24px;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        font-size: 14px;
    }

    button[type=submit] { background:#667eea; color:#fff; }
    button[type=reset] { background:#e0e0e0; color:#333; }

    .form-success, .form-error {
        margin-top: 15px;
        padding: 12px;
        border-radius: 6px;
        display: none;
        font-size: 0.95rem;
    }

    .form-success { background: #d4edda; border:1px solid #c3e6cb; color:#155724; }
    .form-error { background: #f8d7da; border:1px solid #f5c6cb; color:#721c24; }

    /* Voice Controls */
    .voice-card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        color: #333;
        box-shadow: 0 4px 6px rgba(0,0,0,0.12);
    }

    .panel {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
    }

    .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        background: #f9fafb;
        border: 1px solid #d1d5db;
        font-size: 13px;
        color: #333;
    }

    .dot { width:10px; height:10px; border-radius:50%; background:#9aa4d4; }
    .dot.on { background:#27d17f; box-shadow:0 0 10px #27d17f; }

    button.small-btn {
        padding: 8px 14px;
        background: #667eea;
        border-radius: 6px;
        color: #fff;
        border: none;
        cursor: pointer;
    }

    #txtCmd {
        flex: 1;
        padding: 10px;
        border-radius: 6px;
        border: 2px solid #ddd;
        font-size: 14px;
    }

    /* Voice Overlay */
    #voice-overlay {
        position: fixed;
        right: 20px;
        bottom: 20px;
        max-width: 360px;
        background: #1f2937;
        color: #fff;
        padding: 12px 14px;
        border-radius: 12px;
        font-size: 14px;
        z-index: 9999;
        opacity: 0.95;
    }

    #voice-overlay .title {
        font-weight: 700;
        margin-bottom: 6px;
    }

    /* History Sidebar */
    #voice-history {
        position: fixed;
        left: 20px;
        bottom: 20px;
        width: 300px;
        background: white;
        color: #333;
        border-radius: 12px;
        padding: 10px;
        box-shadow: 0 6px 20px rgba(0,0,0,.15);
        z-index: 9998;
    }

    #voice-history h4 {
        margin-bottom: 8px;
        color: #667eea;
    }

    #history-list {
        list-style: none;
        padding: 0;
        font-family: monospace;
        max-height: 160px;
        overflow-y: auto;
        font-size: 12px;
    }
</style>
</head>

<body>

<div class="container">

    <div class="header">
        <h1>üìã Form Filling Voice Tests</h1>
        <p>Use voice commands to interact with the forms.</p>
    </div>

    <!-- Voice Control Panel -->
    <div class="voice-card">
        <h2>üé§ Voice Controls</h2>
        <div class="panel">
            <button id="btnStart" class="small-btn">Start Listening</button>
            <button id="btnStop" class="small-btn">Stop</button>

            <span class="pill">
                <span id="sttDot" class="dot"></span>
                <span id="sttText">idle</span>
            </span>

            <input id="txtCmd" type="text" placeholder='Type a command...'>
            <button id="btnRun" class="small-btn">Run</button>
            <button id="btnList" class="small-btn">List Fields</button>
            <button id="btnHelp" class="small-btn">Help</button>
        </div>
    </div>

    <!-- Forms Grid -->
    <div class="forms-grid">

        <!-- Login -->
        <div class="form-card">
            <h2>üîê Login Form</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email*</label>
                    <input id="login-email" type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password*</label>
                    <input id="login-password" type="password" name="password" required minlength="6">
                </div>
                <div class="checkbox-group">
                    <input id="login-remember" type="checkbox" name="remember">
                    <label for="login-remember">Remember me</label>
                </div>
                <div class="form-actions">
                    <button type="submit">Login</button>
                    <button type="reset">Reset</button>
                </div>
                <div id="login-success" class="form-success">Login successful!</div>
                <div id="login-error" class="form-error">Please check your input</div>
            </form>
        </div>

        <!-- Signup -->
        <div class="form-card">
            <h2>üìù Signup Form</h2>
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name*</label>
                    <input id="signup-name" type="text" name="name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email*</label>
                    <input id="signup-email" type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password*</label>
                    <input id="signup-password" type="password" name="password" required minlength="8">
                </div>
                <div class="form-group">
                    <label for="signup-age">Age*</label>
                    <input id="signup-age" type="number" name="age" required min="13" max="120">
                </div>
                <div class="form-group">
                    <label for="signup-country">Country*</label>
                    <select id="signup-country" name="country" required>
                        <option value="">Select</option>
                        <option value="us">United States</option>
                        <option value="uk">United Kingdom</option>
                        <option value="ca">Canada</option>
                        <option value="au">Australia</option>
                        <option value="de">Germany</option>
                    </select>
                </div>
                <div class="checkbox-group">
                    <input id="signup-terms" type="checkbox" name="terms" required>
                    <label for="signup-terms">I agree to terms</label>
                </div>
                <div class="form-actions">
                    <button type="submit">Sign Up</button>
                    <button type="reset">Reset</button>
                </div>
                <div id="signup-success" class="form-success">Account created!</div>
                <div id="signup-error" class="form-error">Please fill all fields</div>
            </form>
        </div>

        <!-- Contact -->
        <div class="form-card">
            <h2>üìß Contact Form</h2>
            <form id="contact-form">
                <div class="form-group">
                    <label for="contact-name">Name*</label>
                    <input id="contact-name" type="text" name="name" required>
                </div>
                <div class="form-group">
                    <label for="contact-email">Email*</label>
                    <input id="contact-email" type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="contact-subject">Subject*</label>
                    <select id="contact-subject" name="subject" required>
                        <option value="">Choose</option>
                        <option value="general">General Inquiry</option>
                        <option value="support">Technical Support</option>
                        <option value="feedback">Feedback</option>
                        <option value="bug">Bug Report</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="contact-message">Message*</label>
                    <textarea id="contact-message" name="message" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit">Send</button>
                    <button type="reset">Reset</button>
                </div>
                <div id="contact-success" class="form-success">Message sent!</div>
                <div id="contact-error" class="form-error">Please complete all fields</div>
            </form>
        </div>

        <!-- Checkout -->
        <div class="form-card">
            <h2>üõí Checkout Form</h2>
            <form id="checkout-form">
                <div class="form-group">
                    <label for="checkout-name">Full Name*</label>
                    <input id="checkout-name" name="name" type="text" required>
                </div>
                <div class="form-group">
                    <label for="checkout-email">Email*</label>
                    <input id="checkout-email" name="email" type="email" required>
                </div>
                <div class="form-group">
                    <label for="checkout-address">Address*</label>
                    <input id="checkout-address" name="address" type="text" required>
                </div>
                <div class="form-group">
                    <label for="checkout-city">City*</label>
                    <input id="checkout-city" name="city" type="text" required>
                </div>
                <div class="form-group">
                    <label for="checkout-zip">ZIP Code*</label>
                    <input id="checkout-zip" name="zip" type="text" required pattern="\d{5}">
                </div>
                <div class="form-group">
                    <label for="checkout-card">Card Number*</label>
                    <input id="checkout-card" name="card" type="text" required pattern="\d{16}">
                </div>
                <div class="form-group">
                    <label for="checkout-shipping">Shipping Method*</label>
                    <select id="checkout-shipping" name="shipping" required>
                        <option value="">Select</option>
                        <option value="standard">Standard</option>
                        <option value="express">Express</option>
                        <option value="overnight">Overnight</option>
                    </select>
                </div>
                <div class="checkbox-group">
                    <input id="checkout-subscribe" name="subscribe" type="checkbox">
                    <label for="checkout-subscribe">Subscribe to newsletter</label>
                </div>
                <div class="checkbox-group">
                    <input id="checkout-terms" name="terms" type="checkbox" required>
                    <label for="checkout-terms">I agree to terms</label>
                </div>
                <div class="form-actions">
                    <button type="submit">Complete Purchase</button>
                    <button type="reset">Reset</button>
                </div>
                <div id="checkout-success" class="form-success">Order placed!</div>
                <div id="checkout-error" class="form-error">Complete all fields</div>
            </form>
        </div>

    </div>

</div>

<!-- Voice Status Overlay -->
<div id="voice-overlay">
    <div class="title">Voice Assistant</div>
    <div class="line" id="voiceLine">Ready.</div>
</div>

<!-- History -->
<div id="voice-history">
    <h4>Voice History</h4>
    <ul id="history-list"></ul>
</div>

<script>
/* ------------------------------
   FORM SUBMISSION HANDLING
--------------------------------*/
const forms = ["login","signup","contact","checkout"];

forms.forEach(type => {
    const form = document.getElementById(`${type}-form`);
    const ok = document.getElementById(`${type}-success`);
    const err = document.getElementById(`${type}-error`);

    form.addEventListener("submit", e => {
        e.preventDefault();
        ok.style.display = "none";
        err.style.display = "none";

        if (form.checkValidity()) {
            ok.style.display = "block";
            speak(`Submitted ${type} form`);
            setTimeout(() => { form.reset(); ok.style.display="none"; }, 1500);
        } else {
            err.style.display = "block";
            form.reportValidity();
            speak("Please fill all required fields");
        }
    });

    form.addEventListener("reset", () => {
        ok.style.display = "none";
        err.style.display = "none";
    });
});

/* ------------------------------
   FIELD MAP
--------------------------------*/
const FIELD_MAP = {
    "email": ["login-email","signup-email","contact-email","checkout-email"],
    "password": ["login-password","signup-password"],
    "name": ["signup-name","contact-name","checkout-name"],
    "remember": ["login-remember"],
    "remember me": ["login-remember"],
    "terms": ["signup-terms","checkout-terms"],
    "subscribe": ["checkout-subscribe"],
    "country": ["signup-country"],
    "shipping": ["checkout-shipping"],
    "address": ["checkout-address"],
    "city": ["checkout-city"],
    "zip": ["checkout-zip"],
    "card": ["checkout-card"],
    "message": ["contact-message"]
};

function mapField(spoken){
    spoken = spoken.toLowerCase().trim();
    if (FIELD_MAP[spoken]) return FIELD_MAP[spoken][0];
    for (const key of Object.keys(FIELD_MAP)) {
        if (spoken.includes(key)) return FIELD_MAP[key][0];
    }
    return null;
}

/* ------------------------------
   HIGHLIGHT FIELD
--------------------------------*/
function highlight(id, good=true){
    const el = document.getElementById(id);
    if (!el) return;
    el.scrollIntoView({behavior:"smooth", block:"center"});
    const old = el.style.boxShadow;
    el.style.boxShadow = `0 0 0 4px ${good ? "rgba(40,167,69,.25)" : "rgba(220,53,69,.25)"}`;
    setTimeout(()=> el.style.boxShadow = old, 1200);
}

/* ------------------------------
   TTS FEEDBACK
--------------------------------*/
function speak(text){
    if (!("speechSynthesis" in window)) return;
    const u = new SpeechSynthesisUtterance(text);
    window.speechSynthesis.speak(u);
    document.getElementById("voiceLine").innerText = text;
}

/* ------------------------------
   HISTORY
--------------------------------*/
function logHistory(text, ok=true){
    const list = document.getElementById("history-list");
    const li = document.createElement("li");
    li.style.color = ok ? "#28a745" : "#dc3545";
    li.textContent = `${new Date().toLocaleTimeString()} ‚Äî ${text}`;
    list.prepend(li);
    if (list.children.length > 12) list.removeChild(list.lastChild);
}

/* ------------------------------
   APPLY COMMAND
--------------------------------*/
function runCommand(raw){
    const parts = raw.trim().toLowerCase().split(" ");
    const action = parts[0];
    const field = parts[1];
    const value = parts.slice(2).join(" ");

    /* LIST FIELDS */
    if (raw === "list fields"){
        speak("Listing fields");
        logHistory("Listed fields");
        alert(Object.keys(FIELD_MAP).join("\n"));
        return;
    }

    /* HELP */
    if (raw === "help"){
        speak("You can say fill, check, select, submit, reset");
        logHistory("Help shown");
        alert(`Commands:
fill email john@example.com
check terms
select shipping express
submit form`);
        return;
    }

    /* SUBMIT */
    if (raw === "submit" || raw === "submit form"){
        const f = document.querySelector("form");
        f.requestSubmit();
        speak("Form submitted");
        logHistory("Submit");
        return;
    }

    /* RESET */
    if (raw === "reset"){
        const f = document.querySelector("form");
        f.reset();
        speak("Form cleared");
        logHistory("Reset");
        return;
    }

    /* FILL */
    if (action === "fill" || action === "set" || action === "type"){
        const id = mapField(field);
        if (!id){ speak("Field not found"); logHistory(raw,false); return; }
        document.getElementById(id).value = value;
        highlight(id,true);
        speak(`Filled ${field}`);
        logHistory(raw);
        return;
    }

    /* CHECK / TOGGLE */
    if (action === "check" || action === "uncheck" || action === "toggle"){
        const id = mapField(field);
        if (!id){ speak("Checkbox not found"); logHistory(raw,false); return; }
        const el = document.getElementById(id);
        el.checked = action !== "uncheck";
        highlight(id, el.checked);
        speak(`${action} ${field}`);
        logHistory(raw);
        return;
    }

    /* SELECT */
    if (action === "select"){
        const id = mapField(field);
        if (!id){ speak("Field not found"); logHistory(raw,false); return; }
        const sel = document.getElementById(id);
        const opt = [...sel.options].find(o => o.text.toLowerCase().includes(value) || o.value.toLowerCase().includes(value));
        if (!opt){ speak("Option not found"); logHistory(raw,false); return; }
        sel.value = opt.value;
        highlight(id,true);
        speak(`Selected ${opt.text}`);
        logHistory(raw);
        return;
    }

    speak("Command not recognized");
    logHistory(raw,false);
}

/* ------------------------------
   BUTTON WIRING
--------------------------------*/
document.getElementById("btnRun").onclick = () => runCommand(document.getElementById("txtCmd").value);
document.getElementById("btnList").onclick = () => runCommand("list fields");
document.getElementById("btnHelp").onclick = () => runCommand("help");
</script>
</body>
</html>
